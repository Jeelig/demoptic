<template>
	<div class="page" data-name="opticien">
		<div class="navbar">
			<div class="navbar-bg"></div>
			<div class="navbar-inner sliding">
				<div class="left">
					<a href="#" class="link back">
						<i class="icon icon-back"></i>
						<span class="if-not-md">Back</span>
					</a>
				</div>
				<div class="title">Mon opticien</div>
				<div class="right">
					<a href="#" class="link">
						<div class="f7-icons">heart_fill</div>
						<div class="f7-icons">heart</div>
					</a>
				</div>
			</div>
		</div>
		<div class="page-content" style="background-color: #F2F2F2;">

			<div class="opticien_blue_area" style="height:130px;">
				<div class="row no-gap" style="padding-top:20px">
					<div class="col-40 imgr"><img src=${opticien.image}/></div>
					<div class="col-60 contr">
						<div class="optic_title">${opticien.name}</div>
						<table cellspacing="0" cellpadding="0">
							<tr>
								<td rowspan="2"><div><img src="assets/img/optic/horaires.png"/></div></td>
								<td>Mardi - Samedi</td>
							</tr>
							<tr>
								<td>9h30-12h30 et 14h00-19h00</td>
							</tr>
						</table>
						<div class="opt_adr">${opticien.adresse}</div>
						<div class="opt_web">${opticien.website}</div>
					</div>
				</div>
			</div>

			<div class="above_list_optk on_opticien">

				<div class="list media-list inset" style="margin-top: 20px; text-align: left;">
					
					<div class="optic_title">${opticien.name}</div>
					<div class="optic_expertize">Expertise monture sport</div>
					<div class="f7-icons star">star_fill</div>
					<div class="f7-icons star">star_fill</div>
					<div class="f7-icons star">star_fill</div>
					<div class="f7-icons star gray">star_fill</div>
					<div class="f7-icons star gray">star_fill</div>

					<img src="assets/img/lissac.png" style="width:100%; margin-top:20px;"/>

					<div class="optic_tit_cat">Montures</div>

					<div class="optic_scrolling_div">
						<div>
							<ul>
								<li>Titane</li>
								<li>Acetate</li>
								<li>Plastique</li>
								<li>Metallique</li>
								<li>Titane</li>
								<li>Acetate</li>
								<li>Titane</li>
								<li>Acetate</li>
							</ul>
						</div>
					</div>
					
					<div class="opt_info_resistance">
						<div class="row no-gap">
							<div class="col-15" style="text-align:center; padding-top: 4px;"><img src="assets/img/face/ampoule conseils.png" style="width:35px"/></div>
							<div class="col-85" style="font-size:12px;">
								Resistantes et ultra légères , les montures en titane sont élégantes et ne vous laisseront pas de marque sur le nez.
							</div>
						</div>
					</div>

				</div>

			</div>

			
			<div class="opticien_gray_area" style="height:130px;">

				<div style="padding: 15px;">
					<div class="optic_tit_cat">GARANTIES & SAV*</div>
					<ul>
						<li><img src="assets/img/optic/mutuelle.jpg"/></li>
						<li><img src="assets/img/optic/paiementcarte.png"/></li>
						<li><img src="assets/img/optic/paiementcheque.png"/></li>
					</ul>
				</div>
			</div>
			
		</div>
	</div>
</template>

<script>
	export default function (props, { $f7, $on, $update }) {
		// Component Data
		//var self = this;
		let name = "Jimmy";
		let age = 25;
		let likes = ["Tennis", "Chess", "Football"];
		var id = props.id;
		var opticien = {name:"toto"};

		// Component Methods
		const openAlert = () => {
			$f7.dialog.alert("Hello World");
		};
		const addValue = () => {
			debugger;
			$update();
		};
		const liked = () => {
			supe.from('favoris')
			.select("id")
			.eq('opticien', id)
			.then((response) => {
				console.log(response);
				//debugger;
				if (response.data.length > 0) {
					//debugger;
					opticien.liked = true;
				}
			})
			.catch((err) => {
				console.warn(err)
			});
		};

		// Page Events
		$on("pageMounted", (e, page) => {
			console.log("pageMounted", page);
		});
		$on("pageInit", (e, page) => {
			var self = this;
			console.log("pageInit", page);
			supe.from('Opticien')
			.select(`id, name, adresse, email, telephone, image, website)`)
			.eq('id', id)
			.then((response) => {
				console.log(response);
				opticien = response.data[0];
				$update();
				liked();
			}).catch((error)=> {
				console.warn(error);
			});
		});
		$on("pageBeforeIn", (e, page) => {
			console.log("pageBeforeIn", page);
		});
		$on("pageAfterIn", (e, page) => {
			console.log("pageAfterIn", page);
		});
		$on("pageBeforeOut", (e, page) => {
			console.log("pageBeforeOut", page);
		});
		$on("pageAfterOut", (e, page) => {
			console.log("pageAfterOut", page);
		});
		$on("pageBeforeRemove", (e, page) => {
			console.log("pageBeforeRemove", page);
		});


		// Return render function
		return $render;
	}
</script>